<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>EM SPARKLE CLEAN - Ø®Ø¯Ù…Ø§Øª ØªÙ†Ø¸ÙŠÙ Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

<style>
/* ===== CSS VARIABLES ===== */
:root {
  --primary: #6366F1;
  --primary-hover: #4F46E5;
  --dark: #111827;
  --light: #F3F4F6;
  --medium: #D1D5DB;
  --text: #374151;
  --white: #fff;
  --success: #10B981;
  --danger: #EF4444;
  --warning: #F59E0B;
}

/* ===== GLOBAL RESET ===== */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Tajawal', 'Poppins', sans-serif;
  background: var(--light);
  color: var(--text);
  line-height: 1.6;
}

/* English Direction */
body[dir="ltr"] {
  font-family: 'Poppins', sans-serif;
}

/* ===== MAIN APP CONTAINER ===== */
.app {
  max-width: 420px;
  margin: auto;
  background: var(--white);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 30px rgba(0,0,0,0.1);
}

/* ===== HEADER ===== */
.header {
  text-align: center;
  padding: 25px 20px;
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
  color: var(--white);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.header h1 {
  font-size: 26px;
  font-weight: 700;
  margin-bottom: 5px;
  letter-spacing: 1px;
}

.header p {
  font-size: 14px;
  opacity: 0.95;
  font-weight: 400;
}

/* ===== PROGRESS BAR ===== */
.progress-container {
  padding: 15px 20px 10px;
  background: var(--white);
}

.progress-info {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
}

.progress-bar {
  height: 10px;
  background: var(--light);
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}

.progress-bar-inner {
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, var(--primary) 0%, var(--primary-hover) 100%);
  transition: width 0.4s ease;
  border-radius: 10px;
}

/* ===== STEP CONTAINER ===== */
.step {
  display: none;
  padding: 25px;
  flex: 1;
  animation: fadeIn 0.4s ease;
}

.step.active {
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.step h3 {
  margin-bottom: 20px;
  font-size: 20px;
  color: var(--dark);
  font-weight: 700;
}

.step label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: var(--text);
  font-size: 15px;
}

/* ===== LANGUAGE SWITCHER ===== */
.lang-switcher {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-bottom: 25px;
  padding: 5px;
  background: var(--light);
  border-radius: 12px;
  max-width: 200px;
  margin-left: auto;
  margin-right: auto;
}

.lang-switcher button {
  flex: 1;
  border: none;
  background: transparent;
  border-radius: 8px;
  padding: 8px 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  color: var(--text);
  font-size: 14px;
}

.lang-switcher button.active {
  background: var(--primary);
  color: var(--white);
  box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3);
}

.lang-switcher button:hover:not(.active) {
  background: rgba(99, 102, 241, 0.1);
}

/* ===== OPTION CARDS ===== */
.option-group {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-bottom: 20px;
}

.option-card {
  border: 2px solid var(--medium);
  border-radius: 12px;
  padding: 20px 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  font-weight: 600;
  font-size: 15px;
  background: var(--white);
  position: relative;
  min-height: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.option-card:hover {
  border-color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
}

.option-card.active {
  background: var(--primary);
  color: var(--white);
  border-color: var(--primary);
  box-shadow: 0 6px 12px rgba(99, 102, 241, 0.3);
}

.option-card.active::after {
  content: 'âœ“';
  position: absolute;
  top: 8px;
  right: 8px;
  width: 24px;
  height: 24px;
  background: var(--white);
  color: var(--primary);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
}

[dir="ltr"] .option-card.active::after {
  right: auto;
  left: 8px;
}

/* ===== COUNTER ===== */
.counter-container {
  margin-bottom: 20px;
}

.counter {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--light);
  padding: 12px 20px;
  border-radius: 12px;
  margin-top: 10px;
}

.counter-btn {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  border: 2px solid var(--primary);
  background: var(--white);
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
  color: var(--primary);
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.counter-btn:hover {
  background: var(--primary);
  color: var(--white);
  transform: scale(1.1);
}

.counter-btn:active {
  transform: scale(0.95);
}

.counter-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--dark);
  min-width: 50px;
  text-align: center;
}

/* ===== SERVICE CARDS ===== */
.service-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-bottom: 20px;
}

.service-card {
  border: 2px solid var(--medium);
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s;
  background: var(--white);
  position: relative;
}

.service-card:hover {
  border-color: var(--primary);
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.1);
}

.service-card.active {
  border-color: var(--primary);
  box-shadow: 0 6px 16px rgba(99, 102, 241, 0.3);
}

.service-card.active::before {
  content: 'âœ“';
  position: absolute;
  top: 10px;
  right: 10px;
  width: 28px;
  height: 28px;
  background: var(--primary);
  color: var(--white);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  z-index: 10;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}

[dir="ltr"] .service-card.active::before {
  right: auto;
  left: 10px;
}

.service-card-img {
  width: 100%;
  height: 120px;
  object-fit: cover;
  background: var(--light);
}

.service-card-content {
  text-align: center;
  padding: 12px;
}

.service-card-content strong {
  display: block;
  margin-bottom: 5px;
  color: var(--dark);
  font-size: 14px;
}

.service-card-content .price {
  color: var(--primary);
  font-weight: 700;
  font-size: 15px;
}

/* ===== DAY/TIME SELECTOR ===== */
.day-selector, .time-selector {
  margin-bottom: 20px;
}

.grid-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.grid-item {
  padding: 15px 10px;
  border-radius: 10px;
  background: var(--light);
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  font-weight: 600;
  font-size: 14px;
  border: 2px solid transparent;
}

.grid-item:hover {
  background: rgba(99, 102, 241, 0.1);
  border-color: var(--primary);
}

.grid-item.active {
  background: var(--primary);
  color: var(--white);
  border-color: var(--primary);
  box-shadow: 0 4px 8px rgba(99, 102, 241, 0.3);
}

/* ===== INPUT FIELDS ===== */
.input-group {
  margin-bottom: 20px;
}

.input-field {
  width: 100%;
  padding: 15px;
  border: 2px solid var(--medium);
  border-radius: 10px;
  font-size: 16px;
  font-family: inherit;
  transition: all 0.3s;
  background: var(--white);
}

.input-field:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.input-field::placeholder {
  color: #9CA3AF;
}

/* Phone Input Special Styling */
.phone-input-container {
  position: relative;
}

.country-code {
  position: absolute;
  left: 15px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: 600;
  color: var(--text);
  pointer-events: none;
}

[dir="ltr"] .country-code {
  left: auto;
  right: 15px;
}

.phone-input-container .input-field {
  padding-right: 80px;
}

[dir="ltr"] .phone-input-container .input-field {
  padding-right: 15px;
  padding-left: 80px;
}

/* ===== SUMMARY CARD ===== */
.summary-card {
  background: var(--light);
  padding: 20px;
  border-radius: 12px;
  line-height: 2;
  margin-bottom: 20px;
}

.summary-row {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid var(--medium);
}

.summary-row:last-child {
  border-bottom: none;
}

.summary-row strong {
  color: var(--dark);
}

.summary-row span {
  color: var(--text);
  font-weight: 500;
}

.summary-total {
  margin-top: 15px;
  padding-top: 15px;
  border-top: 2px solid var(--medium);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.summary-total strong {
  font-size: 20px;
  color: var(--dark);
}

.summary-total .total-price {
  font-size: 24px;
  font-weight: 700;
  color: var(--primary);
}

/* ===== SUCCESS MESSAGE ===== */
.success-container {
  text-align: center;
  padding: 40px 20px;
}

.success-icon {
  width: 100px;
  height: 100px;
  background: var(--success);
  border-radius: 50%;
  margin: 0 auto 25px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 50px;
  color: var(--white);
  animation: scaleIn 0.5s ease;
}

@keyframes scaleIn {
  from { transform: scale(0); }
  to { transform: scale(1); }
}

.success-container h2 {
  color: var(--success);
  margin-bottom: 15px;
  font-size: 24px;
}

.success-container p {
  color: var(--text);
  font-size: 16px;
  margin-bottom: 10px;
}

/* ===== FOOTER ===== */
.footer {
  padding: 20px;
  border-top: 2px solid var(--light);
  position: sticky;
  bottom: 0;
  background: var(--white);
  box-shadow: 0 -4px 6px rgba(0,0,0,0.05);
}

.price-display {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding: 15px;
  background: var(--light);
  border-radius: 10px;
}

.price-display strong {
  font-size: 16px;
  color: var(--dark);
}

.price-display .price {
  font-size: 22px;
  font-weight: 700;
  color: var(--primary);
}

.btn {
  width: 100%;
  padding: 16px;
  border: none;
  border-radius: 12px;
  font-size: 17px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s;
  font-family: inherit;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.btn-primary {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
  color: var(--white);
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.btn-primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4);
}

.btn-primary:active:not(:disabled) {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: var(--medium);
  cursor: not-allowed;
  box-shadow: none;
}

/* ===== ALERT MESSAGES ===== */
.alert {
  padding: 12px 15px;
  border-radius: 8px;
  margin-bottom: 15px;
  font-size: 14px;
  display: none;
}

.alert.show {
  display: block;
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.alert-warning {
  background: #FEF3C7;
  color: #92400E;
  border-left: 4px solid var(--warning);
}

.alert-error {
  background: #FEE2E2;
  color: #991B1B;
  border-left: 4px solid var(--danger);
}

/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 480px) {
  .app {
    max-width: 100%;
  }
  
  .header h1 {
    font-size: 22px;
  }
  
  .step {
    padding: 20px 15px;
  }
  
  .option-group {
    gap: 12px;
  }
  
  .service-grid {
    grid-template-columns: 1fr;
  }
}

/* ===== LOADING ANIMATION ===== */
.loading {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255,255,255,.3);
  border-radius: 50%;
  border-top-color: var(--white);
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
</style>
</head>

<body dir="rtl">
<div class="app">

  <!-- ===== HEADER ===== -->
  <div class="header">
    <h1 id="headerTitle">EM SPARKLE CLEAN</h1>
    <p id="headerSubtitle">Ø®Ø¯Ù…Ø§Øª ØªÙ†Ø¸ÙŠÙ Ø§Ø­ØªØ±Ø§ÙÙŠØ©</p>
  </div>

  <!-- ===== PROGRESS BAR ===== -->
  <div class="progress-container">
    <div class="progress-info">
      <span id="stepLabel">Ø§Ù„Ø®Ø·ÙˆØ© 1 Ù…Ù† 6</span>
      <span id="stepPercent">17%</span>
    </div>
    <div class="progress-bar">
      <div id="progressBar" class="progress-bar-inner"></div>
    </div>
  </div>

  <!-- ===== STEP 1: LANGUAGE & CITY ===== -->
  <div id="step1" class="step active">
    <div class="lang-switcher">
      <button onclick="setLanguage('ar')" id="btnAr" class="active">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
      <button onclick="setLanguage('en')" id="btnEn">English</button>
    </div>
    
    <h3 id="step1Title">Ø§Ø®ØªØ± Ù…Ø¯ÙŠÙ†ØªÙƒ</h3>
    <div class="option-group">
      <div class="option-card" onclick="selectCity('Dubai', this)">
        <span class="city-ar">Ø¯Ø¨ÙŠ</span>
        <span class="city-en" style="display:none">Dubai</span>
      </div>
      <div class="option-card" onclick="selectCity('Sharjah', this)">
        <span class="city-ar">Ø§Ù„Ø´Ø§Ø±Ù‚Ø©</span>
        <span class="city-en" style="display:none">Sharjah</span>
      </div>
      <div class="option-card" onclick="selectCity('Ajman', this)">
        <span class="city-ar">Ø¹Ø¬Ù…Ø§Ù†</span>
        <span class="city-en" style="display:none">Ajman</span>
      </div>
      <div class="option-card" onclick="selectCity('Abu Dhabi', this)">
        <span class="city-ar">Ø£Ø¨Ùˆ Ø¸Ø¨ÙŠ</span>
        <span class="city-en" style="display:none">Abu Dhabi</span>
      </div>
    </div>
  </div>

  <!-- ===== STEP 2: SERVICE DETAILS ===== -->
  <div id="step2" class="step">
    <h3 id="step2Title">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©</h3>
    
    <div class="counter-container">
      <label id="workersLabel">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ø§Ù„</label>
      <div class="counter">
        <button class="counter-btn" onclick="changeWorkers(-1)">âˆ’</button>
        <span class="counter-value" id="workers">1</span>
        <button class="counter-btn" onclick="changeWorkers(1)">+</button>
      </div>
    </div>
    
    <div class="counter-container">
      <label id="hoursLabel">Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª</label>
      <div class="counter">
        <button class="counter-btn" onclick="changeHours(-1)">âˆ’</button>
        <span class="counter-value" id="hours">2</span>
        <button class="counter-btn" onclick="changeHours(1)">+</button>
      </div>
    </div>
  </div>

  <!-- ===== STEP 3: EXTRA SERVICES ===== -->
  <div id="step3" class="step">
    <h3 id="step3Title">Ø®Ø¯Ù…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</h3>
    <div id="extraServicesGrid" class="service-grid"></div>
  </div>

  <!-- ===== STEP 4: DAY & TIME ===== -->
  <div id="step4" class="step">
    <h3 id="step4Title">Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„ÙˆÙ‚Øª</h3>
    
    <div class="day-selector">
      <label id="dayLabel">Ø§Ù„ÙŠÙˆÙ…</label>
      <div id="daysContainer" class="grid-container"></div>
    </div>
    
    <div class="time-selector">
      <label id="timeLabel">Ø§Ù„ÙˆÙ‚Øª</label>
      <div id="timesContainer" class="grid-container"></div>
    </div>
  </div>

  <!-- ===== STEP 5: CONTACT INFO ===== -->
  <div id="step5" class="step">
    <h3 id="step5Title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
    
    <div class="alert alert-error" id="validationAlert"></div>
    
    <div class="input-group">
      <label id="phoneLabel">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
      <div class="phone-input-container">
        <span class="country-code">+971</span>
        <input 
          type="tel" 
          id="phoneInput" 
          class="input-field" 
          placeholder="5X XXX XXXX"
          maxlength="9"
          oninput="validatePhone()"
        />
      </div>
    </div>
    
    <div class="input-group">
      <label id="addressLabel">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
      <input 
        type="text" 
        id="addressInput" 
        class="input-field" 
        placeholder=""
      />
    </div>
  </div>

  <!-- ===== STEP 6: SUMMARY ===== -->
  <div id="step6" class="step">
    <h3 id="step6Title">Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø¬Ø²</h3>
    <div id="summaryCard" class="summary-card"></div>
  </div>

  <!-- ===== STEP 7: SUCCESS ===== -->
  <div id="step7" class="step">
    <div class="success-container">
      <div class="success-icon">âœ“</div>
      <h2 id="successTitle">ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­!</h2>
      <p id="successMessage">Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ… Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚</p>
      <p id="successNote">Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ… EM SPARKLE CLEAN</p>
    </div>
  </div>

  <!-- ===== FOOTER ===== -->
  <div class="footer">
    <div class="price-display" id="priceDisplay">
      <strong id="totalLabel">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong>
      <span class="price" id="totalPrice">48.00 AED</span>
    </div>
    <button id="nextBtn" class="btn btn-primary" onclick="nextStep()" disabled>
      <span id="btnText">Ø§Ù„ØªØ§Ù„ÙŠ</span>
    </button>
  </div>

</div>

<script>
/* ========================================
   TRANSLATION SYSTEM
======================================== */
const translations = {
  ar: {
    // Header
    headerTitle: 'EM SPARKLE CLEAN',
    headerSubtitle: 'Ø®Ø¯Ù…Ø§Øª ØªÙ†Ø¸ÙŠÙ Ø§Ø­ØªØ±Ø§ÙÙŠØ©',
    
    // Progress
    stepLabel: 'Ø§Ù„Ø®Ø·ÙˆØ© {current} Ù…Ù† {total}',
    
    // Step 1
    step1Title: 'Ø§Ø®ØªØ± Ù…Ø¯ÙŠÙ†ØªÙƒ',
    
    // Step 2
    step2Title: 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©',
    workersLabel: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ø§Ù„',
    hoursLabel: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª',
    
    // Step 3
    step3Title: 'Ø®Ø¯Ù…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)',
    windowCleaning: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†ÙˆØ§ÙØ°',
    ovenCleaning: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙØ±Ù†',
    fridgeCleaning: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø«Ù„Ø§Ø¬Ø©',
    balconyCleaning: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø´Ø±ÙØ©',
    
    // Step 4
    step4Title: 'Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„ÙˆÙ‚Øª',
    dayLabel: 'Ø§Ù„ÙŠÙˆÙ…',
    timeLabel: 'Ø§Ù„ÙˆÙ‚Øª',
    
    // Days
    sunday: 'Ø§Ù„Ø£Ø­Ø¯',
    monday: 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†',
    tuesday: 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',
    wednesday: 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',
    thursday: 'Ø§Ù„Ø®Ù…ÙŠØ³',
    friday: 'Ø§Ù„Ø¬Ù…Ø¹Ø©',
    saturday: 'Ø§Ù„Ø³Ø¨Øª',
    
    // Step 5
    step5Title: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„',
    phoneLabel: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ',
    phonePlaceholder: '5X XXX XXXX',
    addressLabel: 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†',
    addressPlaceholder: 'Ø§ÙƒØªØ¨ Ø¹Ù†ÙˆØ§Ù†Ùƒ Ø¨Ø§Ù„ØªÙØµÙŠÙ„',
    validationPhone: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (9 Ø£Ø±Ù‚Ø§Ù…)',
    validationAddress: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†',
    
    // Step 6
    step6Title: 'Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø¬Ø²',
    summaryCity: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©',
    summaryWorkers: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ø§Ù„',
    summaryHours: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª',
    summaryExtras: 'Ø®Ø¯Ù…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©',
    summaryDay: 'Ø§Ù„ÙŠÙˆÙ…',
    summaryTime: 'Ø§Ù„ÙˆÙ‚Øª',
    summaryPhone: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ',
    summaryAddress: 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†',
    summaryTotal: 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ',
    noExtras: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯',
    
    // Step 7
    successTitle: 'ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­!',
    successMessage: 'Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ… Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚',
    successNote: 'Ø´ÙƒØ±Ø§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø±ÙƒÙ… EM SPARKLE CLEAN',
    
    // Footer
    totalLabel: 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:',
    btnNext: 'Ø§Ù„ØªØ§Ù„ÙŠ',
    btnContinue: 'Ù…ØªØ§Ø¨Ø¹Ø©',
    btnConfirm: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²',
    btnSendWhatsApp: 'Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨'
  },
  
  en: {
    // Header
    headerTitle: 'EM SPARKLE CLEAN',
    headerSubtitle: 'Professional Cleaning Services',
    
    // Progress
    stepLabel: 'Step {current} of {total}',
    
    // Step 1
    step1Title: 'Choose Your City',
    
    // Step 2
    step2Title: 'Service Details',
    workersLabel: 'Number of Workers',
    hoursLabel: 'Number of Hours',
    
    // Step 3
    step3Title: 'Additional Services (Optional)',
    windowCleaning: 'Window Cleaning',
    ovenCleaning: 'Oven Cleaning',
    fridgeCleaning: 'Fridge Cleaning',
    balconyCleaning: 'Balcony Cleaning',
    
    // Step 4
    step4Title: 'Choose Day & Time',
    dayLabel: 'Day',
    timeLabel: 'Time',
    
    // Days
    sunday: 'Sunday',
    monday: 'Monday',
    tuesday: 'Tuesday',
    wednesday: 'Wednesday',
    thursday: 'Thursday',
    friday: 'Friday',
    saturday: 'Saturday',
    
    // Step 5
    step5Title: 'Contact Information',
    phoneLabel: 'Phone Number',
    phonePlaceholder: '5X XXX XXXX',
    addressLabel: 'Address',
    addressPlaceholder: 'Enter your detailed address',
    validationPhone: 'Please enter a valid phone number (9 digits)',
    validationAddress: 'Please enter your address',
    
    // Step 6
    step6Title: 'Booking Summary',
    summaryCity: 'City',
    summaryWorkers: 'Workers',
    summaryHours: 'Hours',
    summaryExtras: 'Extra Services',
    summaryDay: 'Day',
    summaryTime: 'Time',
    summaryPhone: 'Phone',
    summaryAddress: 'Address',
    summaryTotal: 'Total',
    noExtras: 'None',
    
    // Step 7
    successTitle: 'Booking Successful!',
    successMessage: 'We will contact you via WhatsApp within minutes',
    successNote: 'Thank you for choosing EM SPARKLE CLEAN',
    
    // Footer
    totalLabel: 'Total:',
    btnNext: 'Next',
    btnContinue: 'Continue',
    btnConfirm: 'Confirm Booking',
    btnSendWhatsApp: 'Send to WhatsApp'
  }
};

/* ========================================
   APPLICATION STATE
======================================== */
let currentStep = 1;
const totalSteps = 6;
let currentLanguage = 'ar';

const bookingData = {
  city: '',
  workers: 1,
  hours: 2,
  extras: [],
  day: '',
  time: '',
  phone: '',
  address: ''
};

// Pricing
const PRICE_PER_HOUR = 24; // Base price per hour
const EXTRA_SERVICES = [
  { 
    id: 'windows', 
    nameAr: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†ÙˆØ§ÙØ°', 
    nameEn: 'Window Cleaning', 
    price: 25,
    img: 'https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=400&h=300&fit=crop'
  },
  { 
    id: 'oven', 
    nameAr: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„ÙØ±Ù†', 
    nameEn: 'Oven Cleaning', 
    price: 25,
    img: 'https://images.unsplash.com/photo-1556911220-bff31c812dba?w=400&h=300&fit=crop'
  },
  { 
    id: 'fridge', 
    nameAr: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø«Ù„Ø§Ø¬Ø©', 
    nameEn: 'Fridge Cleaning', 
    price: 25,
    img: 'https://images.unsplash.com/photo-1571175443880-49e1d25b2bc5?w=400&h=300&fit=crop'
  },
  { 
    id: 'balcony', 
    nameAr: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø´Ø±ÙØ©', 
    nameEn: 'Balcony Cleaning', 
    price: 20,
    img: 'https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=400&h=300&fit=crop'
  }
];

/* ========================================
   LANGUAGE FUNCTIONS
======================================== */
function setLanguage(lang) {
  currentLanguage = lang;
  
  // Update direction
  document.documentElement.setAttribute('lang', lang);
  document.body.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
  
  // Update button states
  document.getElementById('btnAr').classList.toggle('active', lang === 'ar');
  document.getElementById('btnEn').classList.toggle('active', lang === 'en');
  
  // Update all text content
  updateTranslations();
  
  // Re-render dynamic content
  renderExtraServices();
  renderDays();
  renderTimes();
}

function t(key) {
  return translations[currentLanguage][key] || key;
}

function updateTranslations() {
  // Header
  document.getElementById('headerSubtitle').textContent = t('headerSubtitle');
  
  // Progress
  updateProgress();
  
  // Steps
  document.getElementById('step1Title').textContent = t('step1Title');
  document.getElementById('step2Title').textContent = t('step2Title');
  document.getElementById('step3Title').textContent = t('step3Title');
  document.getElementById('step4Title').textContent = t('step4Title');
  document.getElementById('step5Title').textContent = t('step5Title');
  document.getElementById('step6Title').textContent = t('step6Title');
  
  // Labels
  document.getElementById('workersLabel').textContent = t('workersLabel');
  document.getElementById('hoursLabel').textContent = t('hoursLabel');
  document.getElementById('dayLabel').textContent = t('dayLabel');
  document.getElementById('timeLabel').textContent = t('timeLabel');
  document.getElementById('phoneLabel').textContent = t('phoneLabel');
  document.getElementById('addressLabel').textContent = t('addressLabel');
  
  // Placeholders
  document.getElementById('phoneInput').placeholder = t('phonePlaceholder');
  document.getElementById('addressInput').placeholder = t('addressPlaceholder');
  
  // Success
  document.getElementById('successTitle').textContent = t('successTitle');
  document.getElementById('successMessage').textContent = t('successMessage');
  document.getElementById('successNote').textContent = t('successNote');
  
  // Footer
  document.getElementById('totalLabel').textContent = t('totalLabel');
  updateButtonText();
  
  // City names
  const cityCards = document.querySelectorAll('.option-card');
  cityCards.forEach(card => {
    const arText = card.querySelector('.city-ar');
    const enText = card.querySelector('.city-en');
    if (arText && enText) {
      if (currentLanguage === 'ar') {
        arText.style.display = 'inline';
        enText.style.display = 'none';
      } else {
        arText.style.display = 'none';
        enText.style.display = 'inline';
      }
    }
  });
}

function updateButtonText() {
  let btnText = t('btnNext');
  
  if (currentStep === 5) {
    btnText = t('btnContinue');
  } else if (currentStep === 6) {
    btnText = t('btnSendWhatsApp');
  }
  
  document.getElementById('btnText').textContent = btnText;
}

/* ========================================
   PROGRESS FUNCTIONS
======================================== */
function updateProgress() {
  const percent = ((currentStep - 1) / (totalSteps - 1)) * 100;
  document.getElementById('progressBar').style.width = percent + '%';
  
  const labelText = t('stepLabel')
    .replace('{current}', currentStep)
    .replace('{total}', totalSteps);
  
  document.getElementById('stepLabel').textContent = labelText;
  document.getElementById('stepPercent').textContent = Math.round(percent) + '%';
}

/* ========================================
   STEP 1: CITY SELECTION
======================================== */
function selectCity(city, element) {
  bookingData.city = city;
  selectOption(element);
  enableNextButton();
}

/* ========================================
   STEP 2: SERVICE DETAILS
======================================== */
function changeWorkers(delta) {
  const newValue = bookingData.workers + delta;
  if (newValue >= 1 && newValue <= 5) {
    bookingData.workers = newValue;
    document.getElementById('workers').textContent = newValue;
    updateTotalPrice();
  }
}

function changeHours(delta) {
  const newValue = bookingData.hours + delta;
  if (newValue >= 1 && newValue <= 8) {
    bookingData.hours = newValue;
    document.getElementById('hours').textContent = newValue;
    updateTotalPrice();
  }
}

/* ========================================
   STEP 3: EXTRA SERVICES
======================================== */
function renderExtraServices() {
  const container = document.getElementById('extraServicesGrid');
  container.innerHTML = '';
  
  EXTRA_SERVICES.forEach(service => {
    const card = document.createElement('div');
    card.className = 'service-card';
    card.dataset.serviceId = service.id;
    
    const serviceName = currentLanguage === 'ar' ? service.nameAr : service.nameEn;
    
    card.innerHTML = `
      <img src="${service.img}" alt="${serviceName}" class="service-card-img" onerror="this.src='https://via.placeholder.com/400x300/6366F1/ffffff?text=${encodeURIComponent(serviceName)}'">
      <div class="service-card-content">
        <strong>${serviceName}</strong>
        <div class="price">${service.price} AED</div>
      </div>
    `;
    
    card.onclick = () => toggleExtraService(service, card);
    
    // Restore active state if already selected
    if (bookingData.extras.some(e => e.id === service.id)) {
      card.classList.add('active');
    }
    
    container.appendChild(card);
  });
}

function toggleExtraService(service, element) {
  const index = bookingData.extras.findIndex(e => e.id === service.id);
  
  if (index > -1) {
    // Remove service
    bookingData.extras.splice(index, 1);
    element.classList.remove('active');
  } else {
    // Add service
    bookingData.extras.push(service);
    element.classList.add('active');
  }
  
  updateTotalPrice();
}

/* ========================================
   STEP 4: DAY & TIME
======================================== */
function renderDays() {
  const container = document.getElementById('daysContainer');
  container.innerHTML = '';
  
  const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
  
  days.forEach(day => {
    const item = document.createElement('div');
    item.className = 'grid-item';
    item.textContent = t(day);
    item.onclick = () => selectDay(t(day), item);
    
    if (bookingData.day === t(day)) {
      item.classList.add('active');
    }
    
    container.appendChild(item);
  });
}

function renderTimes() {
  const container = document.getElementById('timesContainer');
  container.innerHTML = '';
  
  const times = ['08:00-10:00', '10:00-12:00', '12:00-14:00', '14:00-16:00', '16:00-18:00', '18:00-20:00'];
  
  times.forEach(time => {
    const item = document.createElement('div');
    item.className = 'grid-item';
    item.textContent = time;
    item.onclick = () => selectTime(time, item);
    
    if (bookingData.time === time) {
      item.classList.add('active');
    }
    
    container.appendChild(item);
  });
}

function selectDay(day, element) {
  bookingData.day = day;
  selectOption(element);
  checkStep4Complete();
}

function selectTime(time, element) {
  bookingData.time = time;
  selectOption(element);
  checkStep4Complete();
}

function checkStep4Complete() {
  if (bookingData.day && bookingData.time) {
    enableNextButton();
  }
}

/* ========================================
   STEP 5: CONTACT INFO
======================================== */
function validatePhone() {
  const phone = document.getElementById('phoneInput').value;
  const alert = document.getElementById('validationAlert');
  
  // Remove non-digits
  const cleaned = phone.replace(/\D/g, '');
  document.getElementById('phoneInput').value = cleaned;
  
  // Check if valid (9 digits, starts with 5)
  if (cleaned.length === 9 && cleaned.startsWith('5')) {
    alert.classList.remove('show');
    bookingData.phone = '+971' + cleaned;
    checkStep5Complete();
    return true;
  } else if (cleaned.length > 0) {
    alert.textContent = t('validationPhone');
    alert.classList.add('show');
    return false;
  } else {
    alert.classList.remove('show');
    return false;
  }
}

function checkStep5Complete() {
  const phone = document.getElementById('phoneInput').value;
  const address = document.getElementById('addressInput').value.trim();
  
  if (phone.length === 9 && phone.startsWith('5') && address.length > 0) {
    bookingData.address = address;
    enableNextButton();
  } else {
    disableNextButton();
  }
}

// Add event listener to address field
document.addEventListener('DOMContentLoaded', function() {
  const addressInput = document.getElementById('addressInput');
  if (addressInput) {
    addressInput.addEventListener('input', checkStep5Complete);
  }
});

/* ========================================
   STEP 6: SUMMARY
======================================== */
function renderSummary() {
  const container = document.getElementById('summaryCard');
  
  const extrasText = bookingData.extras.length > 0 
    ? bookingData.extras.map(e => currentLanguage === 'ar' ? e.nameAr : e.nameEn).join(', ')
    : t('noExtras');
  
  const totalPrice = calculateTotal();
  
  container.innerHTML = `
    <div class="summary-row">
      <strong>${t('summaryCity')}:</strong>
      <span>${bookingData.city}</span>
    </div>
    <div class="summary-row">
      <strong>${t('summaryWorkers')}:</strong>
      <span>${bookingData.workers}</span>
    </div>
    <div class="summary-row">
      <strong>${t('summaryHours')}:</strong>
      <span>${bookingData.hours}</span>
    </div>
    <div class="summary-row">
      <strong>${t('summaryExtras')}:</strong>
      <span>${extrasText}</span>
    </div>
    <div class="summary-row">
      <strong>${t('summaryDay')}:</strong>
      <span>${bookingData.day}</span>
    </div>
    <div class="summary-row">
      <strong>${t('summaryTime')}:</strong>
      <span>${bookingData.time}</span>
    </div>
    <div class="summary-row">
      <strong>${t('summaryPhone')}:</strong>
      <span>${bookingData.phone}</span>
    </div>
    <div class="summary-row">
      <strong>${t('summaryAddress')}:</strong>
      <span>${bookingData.address}</span>
    </div>
    <div class="summary-total">
      <strong>${t('summaryTotal')}:</strong>
      <span class="total-price">${totalPrice} AED</span>
    </div>
  `;
}

/* ========================================
   PRICING FUNCTIONS
======================================== */
function calculateTotal() {
  let total = bookingData.hours * PRICE_PER_HOUR * bookingData.workers;
  
  bookingData.extras.forEach(service => {
    total += service.price;
  });
  
  return total.toFixed(2);
}

function updateTotalPrice() {
  const total = calculateTotal();
  document.getElementById('totalPrice').textContent = total + ' AED';
}

/* ========================================
   NAVIGATION FUNCTIONS
======================================== */
function nextStep() {
  // Validate current step before proceeding
  if (currentStep === 5) {
    const phone = document.getElementById('phoneInput').value;
    const address = document.getElementById('addressInput').value.trim();
    const alert = document.getElementById('validationAlert');
    
    if (!phone || phone.length !== 9 || !phone.startsWith('5')) {
      alert.textContent = t('validationPhone');
      alert.classList.add('show');
      return;
    }
    
    if (!address) {
      alert.textContent = t('validationAddress');
      alert.classList.add('show');
      return;
    }
    
    bookingData.phone = '+971' + phone;
    bookingData.address = address;
  }
  
  // Hide current step
  document.getElementById('step' + currentStep).classList.remove('active');
  
  // Move to next step
  currentStep++;
  
  // Show next step
  document.getElementById('step' + currentStep).classList.add('active');
  
  // Update progress
  updateProgress();
  
  // Update button text
  updateButtonText();
  
  // Disable next button by default
  disableNextButton();
  
  // Handle specific steps
  if (currentStep === 2) {
    // Step 2 is always valid (has default values)
    enableNextButton();
  } else if (currentStep === 3) {
    // Step 3 is optional, always enable
    enableNextButton();
  } else if (currentStep === 6) {
    // Render summary
    renderSummary();
    enableNextButton();
  } else if (currentStep === 7) {
    // Send WhatsApp message
    sendWhatsAppMessage();
    // Hide footer on success page
    document.querySelector('.footer').style.display = 'none';
  }
  
  // Scroll to top
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ========================================
   HELPER FUNCTIONS
======================================== */
function selectOption(element) {
  // Remove active class from all siblings
  const siblings = element.parentNode.querySelectorAll('.option-card, .grid-item, .service-card');
  siblings.forEach(sib => {
    if (sib !== element && !sib.classList.contains('service-card')) {
      sib.classList.remove('active');
    }
  });
  
  // Add active class to clicked element
  if (!element.classList.contains('service-card')) {
    element.classList.add('active');
  }
}

function enableNextButton() {
  document.getElementById('nextBtn').disabled = false;
}

function disableNextButton() {
  document.getElementById('nextBtn').disabled = true;
}

/* ========================================
   WHATSAPP INTEGRATION
======================================== */
function sendWhatsAppMessage() {
  const phoneNumber = '00971528969251';
  
  // Build message
  let message = '';
  
  if (currentLanguage === 'ar') {
    message = `ğŸŒŸ *Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ - EM SPARKLE CLEAN* ğŸŒŸ\n\n`;
    message += `ğŸ“ *Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:* ${bookingData.city}\n`;
    message += `ğŸ‘¥ *Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ø§Ù„:* ${bookingData.workers}\n`;
    message += `â° *Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª:* ${bookingData.hours}\n`;
    
    if (bookingData.extras.length > 0) {
      message += `âœ¨ *Ø®Ø¯Ù…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:*\n`;
      bookingData.extras.forEach(service => {
        message += `   â€¢ ${service.nameAr} (${service.price} AED)\n`;
      });
    }
    
    message += `ğŸ“… *Ø§Ù„ÙŠÙˆÙ…:* ${bookingData.day}\n`;
    message += `ğŸ• *Ø§Ù„ÙˆÙ‚Øª:* ${bookingData.time}\n`;
    message += `ğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${bookingData.phone}\n`;
    message += `ğŸ  *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${bookingData.address}\n`;
    message += `\nğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:* ${calculateTotal()} AED`;
  } else {
    message = `ğŸŒŸ *New Booking - EM SPARKLE CLEAN* ğŸŒŸ\n\n`;
    message += `ğŸ“ *City:* ${bookingData.city}\n`;
    message += `ğŸ‘¥ *Workers:* ${bookingData.workers}\n`;
    message += `â° *Hours:* ${bookingData.hours}\n`;
    
    if (bookingData.extras.length > 0) {
      message += `âœ¨ *Extra Services:*\n`;
      bookingData.extras.forEach(service => {
        message += `   â€¢ ${service.nameEn} (${service.price} AED)\n`;
      });
    }
    
    message += `ğŸ“… *Day:* ${bookingData.day}\n`;
    message += `ğŸ• *Time:* ${bookingData.time}\n`;
    message += `ğŸ“ *Phone:* ${bookingData.phone}\n`;
    message += `ğŸ  *Address:* ${bookingData.address}\n`;
    message += `\nğŸ’° *Total:* ${calculateTotal()} AED`;
  }
  
  // Encode message for URL
  const encodedMessage = encodeURIComponent(message);
  
  // Create WhatsApp URL
  const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
  
  // Open WhatsApp (will work on mobile and desktop)
  window.open(whatsappURL, '_blank');
}

/* ========================================
   INITIALIZATION
======================================== */
document.addEventListener('DOMContentLoaded', function() {
  // Initialize
  updateProgress();
  updateTotalPrice();
  renderExtraServices();
  renderDays();
  renderTimes();
  
  console.log('EM SPARKLE CLEAN Booking System Initialized');
});
</script>

</body>
</html>